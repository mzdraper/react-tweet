'use strict';

const pageShellInit = require('../page-shell-init');

describe('pageShellInit', () => {
  beforeEach(() => {
    delete global.window;
  });

  test('quietly exits if there is no window', () => {
    expect(() => pageShellInit()).not.toThrow();
  });

  test('quiet exits if there is no MapboxPageShell', () => {
    global.window = {};
    expect(() => pageShellInit()).not.toThrow();
  });

  test('if in production, sets MapboxPageShellProduction to true', () => {
    process.env.DEPLOY_ENV = 'production';
    global.window = {
      MapboxPageShell: {}
    };
    pageShellInit();
    expect(global.window.MapboxPageShellProduction).toBe(true);
  });

  test('if in staging, does not set MapboxPageShellProduction to true', () => {
    process.env.DEPLOY_ENV = 'staging';
    global.window = {
      MapboxPageShell: {}
    };
    pageShellInit();
    expect(global.window.MapboxPageShellProduction).toBeFalsy();
  });
});
